<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;example.com&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;hide&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:&quot;ture&quot;,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:true,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeIn&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeIn&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}</script>
<meta name="description" content="让你们见识一下山顶洞人的做法！">
<meta property="og:type" content="article">
<meta property="og:title" content="给muse主题加粘性边栏">
<meta property="og:url" content="http://example.com/%E7%BB%99muse%E4%B8%BB%E9%A2%98%E5%8A%A0%E7%B2%98%E6%80%A7%E8%BE%B9%E6%A0%8F/index.html">
<meta property="og:site_name" content="我有一个名字超长的博客！">
<meta property="og:description" content="让你们见识一下山顶洞人的做法！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.pawoo.net/media_attachments/files/035/326/454/original/6785632b3b61afbe.png">
<meta property="article:published_time" content="2021-05-11T00:07:38.000Z">
<meta property="article:modified_time" content="2021-05-11T03:43:36.331Z">
<meta property="article:author" content="皮皮">
<meta property="article:tag" content="心得">
<meta property="article:tag" content="nexT">
<meta property="article:tag" content="盲人摸码">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.pawoo.net/media_attachments/files/035/326/454/original/6785632b3b61afbe.png">


<link rel="canonical" href="http://example.com/%E7%BB%99muse%E4%B8%BB%E9%A2%98%E5%8A%A0%E7%B2%98%E6%80%A7%E8%BE%B9%E6%A0%8F/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;http:&#x2F;&#x2F;example.com&#x2F;%E7%BB%99muse%E4%B8%BB%E9%A2%98%E5%8A%A0%E7%B2%98%E6%80%A7%E8%BE%B9%E6%A0%8F&#x2F;&quot;,&quot;path&quot;:&quot;给muse主题加粘性边栏&#x2F;&quot;,&quot;title&quot;:&quot;给muse主题加粘性边栏&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>给muse主题加粘性边栏 | 我有一个名字超长的博客！</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <!-- <h1 class="site-title">我有一个名字超长的博客！</h1>  -->
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-candy-cane fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-ocwiki"><a href="/ocwiki/" rel="section"><i class="fas fa-bread-slice fa-fw"></i>OCwiki</a></li>
        <li class="menu-item menu-item-blog"><a href="/" rel="section"><i class="fas fa-egg fa-fw"></i>blog</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-友情链接"><a href="/links/" rel="section"><i class="fas fa-cheese fa-fw"></i>友情链接</a></li>
  </ul>
</nav>




</div>
    </header>
    
    <div class="mycontent">
      
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
       <!-- <li class="sidebar-nav-overview">
          站点概览
        </li> -->
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">皮皮</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:petuniameng@gmail.com" title="E-Mail → mailto:petuniameng@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/petuniawithicetea" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;petuniawithicetea" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/emshupisim" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;emshupisim" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.mihuashi.com/users/per_" title="米画师 → https:&#x2F;&#x2F;www.mihuashi.com&#x2F;users&#x2F;per_" rel="noopener" target="_blank"><i class="fas fa-palette fa-fw"></i></a>
      </span>
  </div>





        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    

      
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
    
    <div class="post-gallery-image">
      <img src="https://img.pawoo.net/media_attachments/files/035/326/454/original/6785632b3b61afbe.png" itemprop="contentUrl">
    </div>
    </div>

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/%E7%BB%99muse%E4%B8%BB%E9%A2%98%E5%8A%A0%E7%B2%98%E6%80%A7%E8%BE%B9%E6%A0%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="皮皮">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我有一个名字超长的博客！">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          给muse主题加粘性边栏
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-05-10 17:07:38 / 修改时间：20:43:36" itemprop="dateCreated datePublished" datetime="2021-05-10T17:07:38-07:00">2021-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BB%BA%E7%AB%99/" itemprop="url" rel="index"><span itemprop="name">建站</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">让你们见识一下山顶洞人的做法！</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="💥野性十足🤤给Muse主题增加Pisces-Gemini-那样的目录侧栏"><a href="#💥野性十足🤤给Muse主题增加Pisces-Gemini-那样的目录侧栏" class="headerlink" title="💥野性十足🤤给Muse主题增加Pisces/Gemini 那样的目录侧栏"></a>💥野性十足🤤给Muse主题增加Pisces/Gemini 那样的目录侧栏</h1><center>**野路子警告！！！！！！** </center>

<center>**野路子警告！！！！！！** </center>

<h6 id="非常不靠谱的章节，没有这项需求的朋友最好直接跳过，-里记载的东西靠谱些。"><a href="#非常不靠谱的章节，没有这项需求的朋友最好直接跳过，-里记载的东西靠谱些。" class="headerlink" title="非常不靠谱的章节，没有这项需求的朋友最好直接跳过， 里记载的东西靠谱些。"></a>非常不靠谱的章节，没有这项需求的朋友最好<strong>直接跳过</strong>，<a href="/nexT%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%B0%E5%BD%95%E4%B8%8E%E8%B8%A9%E5%9D%91/" title="不怎么懂码的生物也能看懂的nexT主题魔改方式">不怎么懂码的生物也能看懂的nexT主题魔改方式</a> 里记载的东西靠谱些。</h6><p>这个章节主要是提供一个思路，我开始正经了解CSS/HTML都只有这一整天的时间，内容全是我一点点试错出来的。 记录下来的修改步骤或者设定有可能不定完整。也别问我为啥，因为我也不懂： 80%靠天，%20靠懂的热心网友。虽说最后效果完全是我想要的，但也有些小bug，更无法保证日后的稳定。 主要是想给自己留个档+为有相似需求的人提供思路。</p>
<p>当然很欢迎懂的人来指正交流。</p>
<hr>
<p>先说一下我想要的效果： 我想要muse主题的博文页面上上加入在Pisces/Gemini式的边栏，并且在滚动页面时可以粘在顶端。我又只想要目录； 作者信息，站点概览等都不要；目录也只是在特定博文才想要。</p>
<hr>
<p>在这里按顺序说一下每一步做了什么，最后效果是什么。</p>
<p>我先从<code>/source/css/schemes/Pisces/_sidebar.styl</code> 里把sidebar相关的css全都复制到了我的<code>style.styl</code> 里。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: $sidebar-offset;</span><br><span class="line">  // https://caniuse.com/css-sticky</span><br><span class="line">  //position: -webkit-sticky; //现在关掉这两项才会有东西显示</span><br><span class="line">  //<span class="attribute">position</span>: sticky;</span><br><span class="line">  <span class="attribute">top</span>: $sidebar-offset;</span><br><span class="line">  <span class="attribute">width</span>: $sidebar-desktop;</span><br><span class="line"></span><br><span class="line">  +tablet-mobile() &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>现在Muse主题上应该会出现一个边栏方块， 但不会粘到顶端； muse原本的侧栏菜单按钮还在，点击后空白的菜单依旧会展开，整个页面也会随之移动。</p>
<p>到<code>config</code> 里把sidebar display 设定为<code>display: hide</code></p>
<p>然后在<code>style.styl</code> 里加上这段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.sidebar-toggle &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样侧栏菜单会消失，空白的菜单也不会自己打开了。</p>
<hr>
<p>接下来调整缝合过来的侧栏方块的位置。 </p>
<p>我在Next主题原生的代码中，侧栏是博客头部（head) 中的一部分，而我想要的效果需要侧栏变成博客”身体”的一部分。这样调整内容是无法靠CSS做到的（或者说我查不到）， 只能对原生HTML代码下手。</p>
<p>找到<code>&gt;node_modules&gt;hexo-theme-next&gt;layout&gt;_layout.njk</code>  (.styl 文档是CSS 代码，njk 文档中是HTML代码。HTML是内容，而CSS是样式风格。)</p>
<p>这里要看的是  <code>&lt;div&gt;</code> 和<code>&lt;/div&gt;</code>   ，这两个就像三明治一样加在一起。 找到sidebar相关的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;%- if theme.sidebar.display !== &#x27;remove&#x27; %&#125;</span><br><span class="line">  &#123;% block sidebar %&#125;&#123;% endblock %&#125;</span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>

<p>把他从 <code>header</code> 三明治中拿出来；</p>
<p>放到想要的博客”身体“ （main-inner) 旁边。</p>
<p>最后一步，为了让 <code>position : sticky</code> 正常工作，我把 <code>sidebar</code> 和 <code>main-inner</code> 夹到了同一个三明治里。 我给这个div起名叫<code>mycontent</code> ， 前面的my是防撞名的。 </p>
<p>被我魔改过的<code>_layout.njk</code> 是这样的结构 （footer相关保留原样）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">itemscope</span> <span class="attr">itemtype</span>=<span class="string">&quot;http://schema.org/WPHeader&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header-inner&quot;</span>&gt;</span></span><br><span class="line">       &#123;%- include &#x27;_partials/header/index.njk&#x27; -%&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mycontent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     &#123;%- if theme.sidebar.display !== &#x27;remove&#x27; %&#125;</span><br><span class="line">     &#123;% block sidebar %&#125;&#123;% endblock %&#125;</span><br><span class="line">     &#123;%- endif %&#125;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">     &#123;&#123; partial(&#x27;_partials/widgets.njk&#x27;, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-inner &#123;% block class %&#125;&#123;% endblock %&#125;&quot;</span>&gt;</span></span><br><span class="line">       &#123;%- include &#x27;_partials/header/sub-menu.njk&#x27; -%&#125;</span><br><span class="line">       &#123;% block content %&#125;&#123;% endblock %&#125;</span><br><span class="line">       &#123;%- include &#x27;_partials/comments.njk&#x27; -%&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>现在用F12查看，能看到侧栏小方块所属三明治确实改变了，但别的还没什么改变。 </p>
<p>再到<code>style.styl</code> 里，给我的原创三明治加料</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.mycontent &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">//  align-items: stretch; //复制来的不懂有啥用，总之留着……</span><br><span class="line">//  justify-content: space-between;</span><br><span class="line">//  height: auto;</span><br><span class="line"> +tablet-mobile() &#123;  //平板/手机访问时没有侧栏，正常显示</span><br><span class="line">    display: block;</span><br><span class="line">    width: auto;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<p>接下来到<code>layout &gt; _macro &lt; sidebar.njk</code> 里，把侧栏中我不想要的东西删掉， 接着按照 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44766883/article/details/113478757">这篇</a> 教程，加入了只让特定博文有目录边栏的代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro render(display_toc) %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;toggle sidebar-toggle&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toggle-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toggle-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toggle-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 只有在front-matter中设置 etoc = ture 的博文才会有目录 --&gt;</span></span><br><span class="line">    &#123;%- set display_toc = page.toc.enable and page.etoc and display_toc %&#125;</span><br><span class="line">    &#123;%- if display_toc %&#125;</span><br><span class="line">      &#123;%- set toc = toc(page.content, &#123;class: &#x27;nav&#x27;, list_number: page.toc.number, max_depth: page.toc.max_depth&#125;) %&#125;</span><br><span class="line">      &#123;%- set display_toc = toc.length &gt; 1 and display_toc %&#125;</span><br><span class="line">    &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- &lt;div class=&quot;sidebar-inner  &#123;% if display_toc %&#125;sidebar-nav-active sidebar-toc-active&#123;% else %&#125;sidebar-overview-active&#123;% endif %&#125;&quot;&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-inner&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-nav-toc&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; __(&#x27;sidebar.toc&#x27;) &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 删掉了站点概要 --&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;li class=&quot;sidebar-nav-overview&quot;&gt;  </span></span><br><span class="line"><span class="comment">          &#123;&#123; __(&#x27;sidebar.overview&#x27;) &#125;&#125;</span></span><br><span class="line"><span class="comment">        &lt;/li&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-panel-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--noindex--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-toc-wrap sidebar-panel&quot;</span>&gt;</span></span><br><span class="line">          &#123;%- if display_toc %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-toc animated&quot;</span>&gt;</span>&#123;&#123; toc &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          &#123;%- endif %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/noindex--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;site-overview-wrap sidebar-panel&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; partial(&#x27;_partials/sidebar/site-overview.njk&#x27;, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><br><span class="line"></span><br><span class="line">          &#123;&#123;- next_inject(&#x27;sidebar&#x27;) &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      &#123;%- if theme.back2top.enable and theme.back2top.sidebar %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back-to-top animated&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;&#123;&#123; __(&#x27;accessibility.back_to_top&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-arrow-up&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      &#123;%- endif %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-dimmer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endmacro %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>接下来回到 <code>style.styl</code>， 加入</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar-overview-active</span>&#123; //关掉其他页面的sidebar</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br></pre></td></tr></table></figure>

<p>这样主页上的作者资料也关掉啦。</p>
<p>到这一步侧栏已经和我想象的差不多了，但还是没办法粘到顶部。 </p>
<p>最后在stackoverflow上找到了<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/44446671/my-position-sticky-element-isnt-sticky-when-using-flexbox">这篇帖子</a> ，  在 <code>.sidebar &#123;&#125; </code> 之中加入 <code>top: $sidebar-offset;</code>, 侧栏终于可以粘上去了！</p>
<hr>
<p> 现在已经达成了我设想的99%！！！ </p>
<p>还差最后一点点： </p>
<p>因为加入了侧边栏，本来居中的main-inner 被顶到另一边了。可怕的是不止在博客页，其他所有页面上的main-inner (就算侧栏没有显示) 全部歪掉了！！！ </p>
<p><img src="https://img.pawoo.net/media_attachments/files/035/926/447/original/fdb84604d8e4549b.png" alt="啊！！！"></p>
<h4 id="可怕！！！！"><a href="#可怕！！！！" class="headerlink" title="可怕！！！！"></a>可怕！！！！</h4><p>因为Main-manner 这个板块本身动态变化也挺多，会改变宽度啊什么的，我尝试了很多方法居中效果都不好。 最后跑到SNS上求助，收到了很多热心老师的建议。 在这里再次感谢帮助我的老师们！！！</p>
<p>最后用到的是凪老师的方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.sidebar &#123;</span><br><span class="line">    margin-top: 12px;</span><br><span class="line">    position: -webkit-sticky;</span><br><span class="line">    position: sticky;</span><br><span class="line">    top: 12px;</span><br><span class="line">    width: 320px;</span><br><span class="line">    align-self: flex-start;</span><br><span class="line">    z-index: 30;</span><br><span class="line">    </span><br><span class="line">.main-inner &#123;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    width: 700px;</span><br><span class="line">    transform: translateX(-19%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>z-index</code> 让侧边栏在main-inner上面， 然后 <code>transform: translateX(xx%)</code> 是根据屏幕宽度左右挪动，对于这种有宽度变化的板块来说正好。</p>
<p>虽然仔细看的话还能看出不太居中，以及屏幕变窄的话能感觉Main-inner开始渐渐变歪，但无所谓了！！！！！！！！ 我内心中完美的侧栏已经做好了！！！！！！！！！</p>
<hr>
<p>最后放一下我现在所有侧边栏相关的css </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line"> <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">  // https://caniuse.com/css-sticky</span><br><span class="line"> position: -webkit-sticky;  //stick</span><br><span class="line"> <span class="attribute">position</span>: sticky;</span><br><span class="line">//<span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line"> //<span class="attribute">margin-left</span>: auto;</span><br><span class="line"> <span class="attribute">top</span>: $sidebar-offset;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  //<span class="attribute">width</span> $sidebar-desktop;</span><br><span class="line">  //<span class="attribute">max-width</span>: <span class="number">200px</span></span><br><span class="line">  align-self: flex-start</span><br><span class="line">  z-index: <span class="number">30</span>;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">+tablet-mobile() &#123;</span><br><span class="line">   <span class="attribute">display</span>: none;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">//  if (hexo-config(&#x27;motion<span class="selector-class">.enable</span>&#x27;) and hexo-config(&#x27;motion<span class="selector-class">.transition</span><span class="selector-class">.sidebar</span>&#x27;)) &#123;</span><br><span class="line">//   <span class="attribute">visibility</span>: hidden;</span><br><span class="line">//  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main-inner</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>, auto;</span><br><span class="line">  //idth: <span class="number">700px</span></span><br><span class="line">  display: block;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">15%</span>);</span><br><span class="line">  //<span class="attribute">position</span>: fixed;</span><br><span class="line">  //<span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">450px</span>)</span><br><span class="line"></span><br><span class="line">  +<span class="built_in">tablet-mobile</span>() &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">transform</span>: none;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar-toggle</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--content-bg-color);</span><br><span class="line">//  <span class="attribute">border-radius</span>: $border-radius;</span><br><span class="line">//  <span class="attribute">color</span>: red;</span><br><span class="line"> <span class="attribute">box-shadow</span>: $box-shadow;</span><br><span class="line"> <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">//  <span class="attribute">color</span>: <span class="built_in">var</span>(--MC);</span><br><span class="line"> <span class="attribute">text-align</span>: left; </span><br><span class="line"> <span class="attribute">background-color</span>: <span class="number">#F5F9F5</span>;</span><br><span class="line"> <span class="attribute">border-radius</span>: <span class="number">18px</span> <span class="meta">!important</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mycontent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">//  <span class="attribute">align-items</span>: stretch;</span><br><span class="line">//  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">//  <span class="attribute">height</span>: auto;</span><br><span class="line"> +tablet-mobile() &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.sidebar-overview-active</span>&#123; //关掉其他页面的sidebar</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="https://img.pawoo.net/media_attachments/files/035/326/454/original/6785632b3b61afbe.png"></p>
<center> 这一切值得吗？<center>







<hr>
<hr>
<h1 id="更新！！！！！"><a href="#更新！！！！！" class="headerlink" title="更新！！！！！"></a>更新！！！！！</h1><p>关于最后提到的居中问题！！！！！</p>
<p>另一位老师提出了这样的方案：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">aside</span><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sidebar-inner</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">320px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不用去动main-inner就能取得居中效果！！！！！</p>
<p>和上面一个方法的不是，上面的方法可以微调侧栏的位置（靠博文这边还是靠浏览器墙边） 这个方案的话我目前还没尝试出来要怎么改位置</p>
<p>但是比上面的更直接了当更简单，对于居中敏感人士也很友好QwQ</p>
<p>再次感谢老师们的指教！！！！！！！ 学到很多！！！！！！！！</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%BF%83%E5%BE%97/" rel="tag"><i class="fa fa-tag"></i> 心得</a>
              <a href="/tags/nexT/" rel="tag"><i class="fa fa-tag"></i> nexT</a>
              <a href="/tags/%E7%9B%B2%E4%BA%BA%E6%91%B8%E7%A0%81/" rel="tag"><i class="fa fa-tag"></i> 盲人摸码</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/nexT%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%B0%E5%BD%95%E4%B8%8E%E8%B8%A9%E5%9D%91/" rel="prev" title="不怎么懂码的生物也能看懂的nexT主题魔改方式">
                  <i class="fa fa-chevron-left"></i> 不怎么懂码的生物也能看懂的nexT主题魔改方式
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>





<script src="/js/comments.js"></script>
</div>
  </div>
  
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fas fa-cube"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">皮皮冷藏库</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fas fa-fish"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fas fa-kiwi-bird"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

<!--添加网站的运行时间-->
<span id="timeDate">载入天数...</span> 
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("05/08/2021 00:38:00");//在此处修改你的建站时间
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "已保持冷藏 "+dnum+" 天 " +hnum+ " 小时 "; 
    
    } 
setInterval("createtime()",250);
</script>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
